# Execution limits - Enhanced for real-world LLM-generated code
fuel_budget = 2_000_000_000         # deterministic instruction budget (generous for complex imports)
memory_bytes = 128_000_000          # ~128 MiB cap for guest linear memory

# IO capture & output size caps (host-side)
stdout_max_bytes = 2_000_000        # 2 MB for larger outputs
stderr_max_bytes = 1_000_000        # 1 MB for error logs

# WASI configuration - Primary writable workspace
mount_host_dir = "workspace"        # host dir to preopen (writable)
guest_mount_path = "/app"           # visible to guest

# Optional: Additional read-only data directory
# Uncomment to enable:
# mount_data_dir = "data"
# guest_data_path = "/data"

# Python interpreter arguments
# -I: Isolated mode (ignore PYTHON* env vars, don't add cwd to sys.path)
# -X utf8: Use UTF-8 mode
argv = ["python", "-I", "/app/user_code.py", "-X", "utf8"]

# Environment variables exposed to the guest (whitelist)
# Safe Python-specific vars that enable common features
[env]
PYTHONUTF8 = "1"                    # Force UTF-8 encoding
LC_ALL = "C.UTF-8"                  # Locale setting
PYTHONIOENCODING = "utf-8"          # I/O encoding
PYTHONHASHSEED = "0"                # Deterministic hashing (optional)
DEMO_GREETING = "Hej fra WASM ðŸ‘‹"   # Demo variable

# Future: per-file perms (WASIp2 granularity) when exposed in wasmtime-py
# [fs_perms]
# "/app" = "readwrite"
